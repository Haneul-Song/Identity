@{
    ViewData["Title"] = "Home Page";
    Layout = "~/Views/Shared/_Layout.cshtml"; // Path to your layout file
}
@model IQueryable<Product>
<div class="container">
    <header style="background-color: #4443fa" class="py-5">
        <div class="container px-4 px-lg-5 my-5">
            <div class="text-center text-white">
                <h1 class="display-4 fw-bolder">
                    <img src="~/img/horizontal-logo.png" alt="Home" class="navbar-brand col-lg-7 col-md-12 col-sm-12" width="100" height="200" />
                </h1>
            </div>
        </div>
    </header>
    @if (!User.Identity.IsAuthenticated)
    {
        <div class="col-lg-12">
            <section class="py-5">
                <div class="container px-4 px-lg-5 mt-5">
                    <h3>Recommended for you</h3>
                    <div class="row gx-4 gx-lg-5 row-cols-1 row-cols-md-2 row-cols-xl-4 justify-content-center">
                        <div class="card shadow">
                            <!-- Product image-->
                            <img class="card-img-top p-3" src="https://www.lego.com/cdn/product-assets/element.img.lod5photo.192x192/300326.jpg" alt="Product image" style="height: 200px; object-fit: contain;" />
                            <!-- Product details-->
                            <div class="card-body p-4">
                                <div class="text-center">
                                    <!-- Product name-->
                                    <h5 class="fw-bolder">Brick 2x2</h5>
                                    <!-- Product price-->
                                    <h6 class="text-muted">$1</h6>
                                </div>
                            </div>
                        </div><div class="card shadow">
                            <!-- Product image-->
                            <img class="card-img-top p-3" src="https://images.brickset.com/sets/large/108-1.jpg?201004210200" alt="Product image" style="height: 200px; object-fit: contain;" />
                            <!-- Product details-->
                            <div class="card-body p-4">
                                <div class="text-center">
                                    <!-- Product name-->
                                    <h5 class="fw-bolder">Battery Box</h5>
                                    <!-- Product price-->
                                    <h6 class="text-muted">$2</h6>
                                </div>
                            </div>
                        </div><div class="card shadow">
                            <!-- Product image-->
                            <img class="card-img-top p-3" src="https://images.brickset.com/sets/images/5070-1.jpg" alt="Product image" style="height: 200px; object-fit: contain;" />
                            <!-- Product details-->
                            <div class="card-body p-4">
                                <div class="text-center">
                                    <!-- Product name-->
                                    <h5 class="fw-bolder">Wheel Sets, Black	1987</h5>
                                    <!-- Product price-->
                                    <h6 class="text-muted">$2</h6>
                                </div>
                            </div>
                        </div><div class="card shadow">
                            <!-- Product image-->
                            <img class="card-img-top p-3" src="https://images.brickset.com/sets/large/745-1.jpg?201801070239" alt="Product image" style="height: 200px; object-fit: contain;" />
                            <!-- Product details-->
                            <div class="card-body p-4">
                                <div class="text-center">
                                    <!-- Product name-->
                                    <h5 class="fw-bolder">Base Plate</h5>
                                    <!-- Product price-->
                                    <h6 class="text-muted">$3</h6>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    }

    @if (User.Identity.IsAuthenticated)
    {
        <div class="col-lg-12">
            <section class="py-5">
                <div class="container px-4 px-lg-5 mt-5">
                    <h3>Top Picks</h3>
                    <div class="row gx-4 gx-lg-5 row-cols-1 row-cols-md-2 row-cols-xl-4 justify-content-center">
                        <div class="card shadow">
                            <!-- Product image-->
                            <img class="card-img-top p-3" src="https://www.lego.com/cdn/product-assets/element.img.lod5photo.192x192/300326.jpg" alt="Product image" style="height: 200px; object-fit: contain;" />
                            <!-- Product details-->
                            <div class="card-body p-4">
                                <div class="text-center">
                                    <!-- Product name-->
                                    <h5 class="fw-bolder">Brick 2x2</h5>
                                    <!-- Product price-->
                                    <h6 class="text-muted">$1</h6>
                                </div>
                            </div>
                        </div><div class="card shadow">
                            <!-- Product image-->
                            <img class="card-img-top p-3" src="https://images.brickset.com/sets/large/108-1.jpg?201004210200" alt="Product image" style="height: 200px; object-fit: contain;" />
                            <!-- Product details-->
                            <div class="card-body p-4">
                                <div class="text-center">
                                    <!-- Product name-->
                                    <h5 class="fw-bolder">Battery Box</h5>
                                    <!-- Product price-->
                                    <h6 class="text-muted">$2</h6>
                                </div>
                            </div>
                        </div><div class="card shadow">
                            <!-- Product image-->
                            <img class="card-img-top p-3" src="https://images.brickset.com/sets/images/5070-1.jpg" alt="Product image" style="height: 200px; object-fit: contain;" />
                            <!-- Product details-->
                            <div class="card-body p-4">
                                <div class="text-center">
                                    <!-- Product name-->
                                    <h5 class="fw-bolder">Wheel Sets, Black	1987</h5>
                                    <!-- Product price-->
                                    <h6 class="text-muted">$2</h6>
                                </div>
                            </div>
                        </div><div class="card shadow">
                            <!-- Product image-->
                            <img class="card-img-top p-3" src="https://images.brickset.com/sets/large/745-1.jpg?201801070239" alt="Product image" style="height: 200px; object-fit: contain;" />
                            <!-- Product details-->
                            <div class="card-body p-4">
                                <div class="text-center">
                                    <!-- Product name-->
                                    <h5 class="fw-bolder">Base Plate</h5>
                                    <!-- Product price-->
                                    <h6 class="text-muted">$3</h6>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    }

    <div class="row">
        <!-- Filters Section (Left Side) -->
        <div class="col-lg-2">
            <!-- Category Filter -->
            <div id="categories" style="padding-bottom: 8px">
                <vc:navigation-menu />
            </div>
            <!-- Color Filter -->
            <div id="primary_color">
                <vc:color />
            </div>
        </div>
@*         <!-- Main Content Section (Right Side) -->
        <div class="col-lg-10">
            <section class="py-5">
                <div class="container px-4 px-lg-5 mt-5">
                    <h3>All Products</h3>
                    <div class="row gx-4 gx-lg-5 row-cols-1 row-cols-md-2 row-cols-xl-4 justify-content-center">
                        @foreach (Product p in Model ?? Enumerable.Empty<Product>())
                        {
                            <div class="col-lg-3 mb-5">
                                <!-- Adjust col size as needed -->
                                <a href="@Url.Action("Product_Detail", "Home", new { product_Id = p.product_ID, name = p.name, img_link = p.img_link, description = p.description, price = p.price})" class="card-link">
                                    <div class="card h-100 border-0">
                                        <partial name="ProductSummary" model="p" />
                                    </div>
                                </a>
                            </div>
                        }
                    </div>
                </div>
            </section>
        </div> *@
    </div>
    <!-- Pagination controls div -->
    @* <div class="row justify-content-center">
        <div class="col-md-6 text-center">
            <div class="pagination-controls">
                <label for="pageSize">Products Per Page:</label>
                <select id="pageSize" onchange="updatePageSize(event)">
                    @foreach (var pageSizeOption in Model.PaginationInfo.PageSizeOptions)
                    {
                        <option value="@pageSizeOption">@pageSizeOption</option>
                    }
                </select>
                <div page-model="@Model.PaginationInfo" page-action="Index" page-class-enabled="true" page-class="btn" page-class-normal="btn-outline-dark" page-class-selected="btn-primary" page-url-category="@Model.CurrentCategory!" class="btn-group pull-right m-1" onclick="markClicked(event)">
                </div>
            </div>
        </div>
    </div> *@
@*     <script>
        document.addEventListener("DOMContentLoaded", function () {
            var pageSizeDropdown = document.getElementById("pageSize");
            // Function to handle changing the page size
            pageSizeDropdown.addEventListener("change", function () {
                var pageSize = this.value;
                updatePageSize(pageSize);
            });
            // Set the selected page size
            var currentPageSize = @Model.PaginationInfo.ItemsPerPage;
            // Function to set the selected page size
            function setSelectedPageSize() {
                for (var i = 0; i < pageSizeDropdown.options.length; i++) {
                    if (pageSizeDropdown.options[i].value === currentPageSize.toString()) {
                        pageSizeDropdown.selectedIndex = i;
                        break;
                    }
                }
            }
            setSelectedPageSize();
        });
        // Function to update page size
        function updatePageSize(pageSize) {
            var currentPageUrl = window.location.href;
            var url = new URL(currentPageUrl);
            url.searchParams.set('pageSize', pageSize);
            url.searchParams.delete('productPage'); // Remove productPage parameter to clean up the URL
            window.location.href = url.toString();
        }
    </script> *@
</div>

